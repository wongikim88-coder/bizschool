# Plan: consulting-gemini-ui

## 1. Feature Overview

| Item | Description |
|------|------------|
| Feature Name | consulting-gemini-ui |
| Description | 전문가상담 페이지의 헤더 아래 영역을 Gemini UI 스타일로 전면 개편 |
| Priority | High |
| Estimated Scope | 4 files 수정 + 1 file 신규 |

## 2. Requirements

### 2.1 Functional Requirements

| ID | Requirement | Details |
|----|-------------|---------|
| FR-01 | 상단 검색창 제거 | consulting 페이지에서 글로벌 SearchBar 숨김 |
| FR-02 | 사이드바 토글 아이콘 복구 | Gemini처럼 좌측 상단에 햄버거 메뉴(≡) 아이콘을 데스크톱/모바일 모두 표시 |
| FR-03 | 사이드바 열림 시 검색 아이콘 표시 | 사이드바 패널 내 "새 채팅" 옆 또는 상단에 검색(돋보기) 아이콘 배치 |
| FR-04 | 채팅 내역 검색 화면 | 검색 아이콘 클릭 시 사이드바 내에서 채팅 내역을 키워드로 검색할 수 있는 UI 표시 |

### 2.2 Non-Functional Requirements

| ID | Requirement |
|----|-------------|
| NFR-01 | Gemini UI와 동일한 레이아웃 패턴 (사이드바 접힘/펼침, 햄버거 토글) |
| NFR-02 | 기존 기능(채팅, 전문가 검증, Suggest Chips 등) 유지 |
| NFR-03 | 반응형 디자인 (모바일/데스크톱) 유지 |

## 3. Gemini UI Reference Analysis

### 3.1 Gemini 사이드바 닫힌 상태
```
┌──┬─────────────────────────────────────────┐
│≡ │  Gemini          [상단 네비게이션]       │
├──┤                                         │
│📝│     (메인 콘텐츠 - 채팅 영역)            │
│  │                                         │
│  │     타이틀 + 입력창 + Chips              │
│  │                                         │
│⚙️│                                         │
└──┴─────────────────────────────────────────┘
```
- 좌측에 좁은 아이콘 레일: 햄버거(≡), 새 채팅(📝), 설정(⚙️)
- 메인 콘텐츠가 전체 너비 사용

### 3.2 Gemini 사이드바 열린 상태
```
┌──────────┬──────────────────────────────────┐
│≡  Gemini │  [상단 네비게이션]                │
├──────────┤                                  │
│📝 새 채팅 │                                  │
│🔍 (검색)  │     (메인 콘텐츠 - 채팅 영역)     │
│──────────│                                  │
│채팅       │     타이틀 + 입력창 + Chips       │
│ • 세션1   │                                  │
│ • 세션2   │                                  │
│──────────│                                  │
│⚙️ 설정    │                                  │
└──────────┴──────────────────────────────────┘
```
- 좌측 패널 ~260px 폭으로 확장
- 새 채팅, 검색, 채팅 목록, 설정 표시

## 4. Current State Analysis

### 4.1 현재 문제점

| Issue | Current State | Target State |
|-------|--------------|--------------|
| 검색창 | layout.tsx에서 모든 페이지에 글로벌 SearchBar 렌더링 | consulting 페이지에서 숨김 |
| 사이드바 토글 | 데스크톱에서 토글 아이콘 없음 (항상 열림) | Gemini처럼 ≡ 아이콘으로 토글 가능 |
| 검색 아이콘 | 사이드바 내 검색 기능 없음 | 사이드바 열림 시 검색 아이콘 표시 |
| 채팅 검색 | 채팅 내역 검색 기능 없음 | 검색 아이콘 클릭 시 검색 UI + 필터링 |

### 4.2 영향받는 파일

| File | Change Type |
|------|------------|
| `src/app/layout.tsx` | Modify - consulting 경로에서 SearchBar/Footer 숨김 |
| `src/app/consulting/page.tsx` | Modify - Gemini 스타일 레이아웃으로 변경, 사이드바 토글 복구 |
| `src/components/consultation/Sidebar.tsx` | Modify - 검색 아이콘 추가, 토글 로직 개선, 검색 UI 추가 |
| `src/components/consultation/ChatHistorySearch.tsx` | New - 채팅 내역 검색 컴포넌트 |
| `src/app/consulting/layout.tsx` | New (optional) - consulting 전용 레이아웃 |

## 5. Implementation Plan

### Phase 1: consulting 페이지에서 검색창 제거 (FR-01)

**방안**: consulting 전용 layout.tsx를 만들어서 SearchBar와 Footer를 제외

- `src/app/consulting/layout.tsx` 생성 → Header만 포함, SearchBar/Footer 제외
- 또는 기존 layout.tsx에서 pathname 기반 조건부 렌더링

### Phase 2: 사이드바 토글 아이콘 복구 (FR-02)

**Gemini 패턴 적용:**
- consulting/page.tsx에 Gemini 스타일 상단 바 추가
  - 좌측: 햄버거 메뉴(≡) 아이콘 → 사이드바 토글 (데스크톱+모바일 모두)
  - 우측: "AI 전문가 상담" 텍스트
- 기존 `md:hidden` 제한 제거 → 모든 화면에서 토글 가능
- 사이드바 닫힘 시: 아이콘 레일(≡ + 새 채팅 아이콘)만 표시 (Gemini 스타일)

### Phase 3: 사이드바 검색 아이콘 추가 (FR-03)

- Sidebar.tsx 수정
  - 사이드바 열림 상태에서 "새 채팅" 버튼 영역에 돋보기(Search) 아이콘 추가
  - 아이콘 위치: 새 채팅 버튼 옆 또는 사이드바 상단 헤더 영역

### Phase 4: 채팅 내역 검색 화면 (FR-04)

- `ChatHistorySearch.tsx` 신규 컴포넌트 생성
  - 검색 입력 필드 (상단 고정)
  - 세션 목록 필터링 (제목 + 메시지 내용 기반)
  - 검색 결과 하이라이트
  - 검색 취소 시 원래 세션 목록으로 복귀
- Sidebar.tsx에서 검색 모드 토글 상태 관리

## 6. UI Mockup

### 사이드바 닫힌 상태 (Gemini 스타일)
```
┌───┬──────────────────────────────────────┐
│ ≡ │  BIZSCHOOL  [강의] [도서] ...        │  ← Header
├───┤──────────────────────────────────────┤
│ 📝│                                      │
│   │   AI 전문가에게 물어보세요              │
│   │                                      │
│   │   [채팅 입력창]                       │
│   │   [Suggest Chips]                    │
│   │                                      │
└───┴──────────────────────────────────────┘
```

### 사이드바 열린 상태
```
┌────────────┬─────────────────────────────┐
│ ≡  Gemini  │  BIZSCHOOL [강의] [도서] ... │  ← Header
├────────────┤─────────────────────────────┤
│ 📝 새 채팅  🔍│                             │
│────────────│  AI 전문가에게 물어보세요       │
│ 오늘        │                             │
│  • 세션1    │  [채팅 입력창]                │
│  • 세션2    │  [Suggest Chips]             │
│────────────│                             │
│ 어제        │                             │
│  • 세션3    │                             │
└────────────┴─────────────────────────────┘
```

### 검색 모드
```
┌────────────┬─────────────────────────────┐
│ ≡          │  BIZSCHOOL [강의] [도서] ... │
├────────────┤─────────────────────────────┤
│ ← 🔍 검색어│                             │
│────────────│                             │
│ 검색 결과:  │  (메인 콘텐츠)               │
│  • 세션1    │                             │
│  • 세션3    │                             │
│            │                             │
└────────────┴─────────────────────────────┘
```

## 7. Acceptance Criteria

- [ ] consulting 페이지에서 상단 글로벌 검색창이 표시되지 않음
- [ ] 데스크톱/모바일 모두에서 햄버거(≡) 아이콘으로 사이드바 열고 닫기 가능
- [ ] 사이드바 닫힌 상태에서 아이콘 레일(≡, 새 채팅) 표시
- [ ] 사이드바 열린 상태에서 검색 아이콘(🔍) 표시
- [ ] 검색 아이콘 클릭 시 채팅 내역 검색 입력 필드 및 필터된 결과 표시
- [ ] 기존 채팅, 전문가 검증, Suggest Chips 기능 정상 동작
- [ ] Gemini와 유사한 부드러운 사이드바 애니메이션 전환
