# Plan: 도서 페이지 카테고리 탭 UI 개선

## 1. 개요

도서 페이지의 카테고리 필터 UI를 교보문고 검색 결과 페이지 스타일로 개선하고, 검색 시 각 카테고리별 결과 건수를 탭에 표시한다.

### 참고 UI
- **교보문고**: `통합검색 (298)` | `교보문고 (280)` | `eBook (17)` | `sam (15)` | `핫트랙스 (1)`
- 가로 배열, 테두리 구분선, 선택된 탭 하단 강조 볼드 라인, 각 탭에 괄호로 건수 표시

## 2. 현황 분석

### 현재 구현
- **CategoryFilter.tsx**: pill 형태 버튼 (`rounded-full`), 카운트 미표시
- **page.tsx**: 선택된 카테고리만 필터링, 카테고리별 건수 계산 없음
- **BookSearch.tsx**: 도서명/저자명 검색, URL 파라미터 방식

### 문제점
1. 카테고리 탭이 pill 버튼 → 교보문고 스타일 탭 UI와 불일치
2. 검색 결과에서 카테고리별 건수를 알 수 없음
3. 사용자가 어떤 카테고리에 검색 결과가 있는지 한눈에 파악 불가

## 3. 요구사항

### FR-01: 교보문고 스타일 탭 UI
- pill 버튼 → 가로 배열 탭 (테두리 구분선 있는 세그먼트 탭)
- 선택된 탭: 하단 볼드 보더 + 진한 텍스트
- 미선택 탭: 일반 텍스트, hover 시 배경색 변경
- 각 탭에 `카테고리명 (N)` 형태로 건수 표시

### FR-02: 카테고리별 검색 결과 건수
- 검색어 입력 시 각 카테고리별 매칭 건수를 실시간 계산
- "전체" 탭: 전체 매칭 건수
- 개별 카테고리: 해당 카테고리 내 매칭 건수
- 검색어 없을 때도 각 카테고리의 도서 수를 표시

## 4. 구현 계획

### 4.1 변경 파일

| 파일 | 변경 내용 |
|------|-----------|
| `src/app/books/page.tsx` | 카테고리별 건수 계산 로직 추가, CategoryFilter에 counts 전달 |
| `src/components/books/CategoryFilter.tsx` | 교보문고 스타일 탭 UI + 건수 표시 |

### 4.2 구현 상세

#### Step 1: page.tsx - 카테고리별 건수 계산
```
1. 검색 조건(search)으로 전체 도서를 먼저 필터
2. 필터된 결과를 카테고리별로 그룹핑하여 건수 계산
3. counts 객체를 CategoryFilter에 props로 전달
   예: { all: 42, 경영전략: 7, 마케팅: 6, ... }
```

#### Step 2: CategoryFilter.tsx - 탭 UI 변경
```
현재: pill 버튼 (rounded-full, gap-2)
변경: 세그먼트 탭 (border-b 구분, 선택된 탭 하단 강조)

- 컨테이너: border-b 하단 보더
- 각 탭: 패딩 + 하단 보더 (선택 시 2px 강조)
- 탭 텍스트: "전체 (42)", "경영전략 (7)" 형태
- 선택 탭: font-bold + border-b-2 primary color
- 미선택 탭: text-muted + hover 배경
```

### 4.3 데이터 흐름
```
page.tsx (서버)
  ├── 검색어로 전체 도서 필터 → searchFiltered
  ├── searchFiltered를 카테고리별 그룹핑 → categoryCounts
  ├── CategoryFilter에 counts 전달
  └── 선택된 카테고리로 최종 필터 → 결과 렌더링

CategoryFilter (클라이언트)
  ├── counts props 수신
  └── 각 탭에 "카테고리 (N)" 렌더링
```

## 5. 비기능 요구사항

- 모바일 반응형: 탭 가로 스크롤 유지
- 접근성: ARIA role="tablist", role="tab", aria-selected 유지
- 성능: 건수 계산은 서버 컴포넌트에서 처리 (클라이언트 연산 최소화)

## 6. 범위 외

- 정렬 옵션 (인기순, 판매량순 등) 추가 안 함
- 필터 사이드바 추가 안 함
- 뷰 모드 전환 (리스트/그리드) 추가 안 함
